<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <%- include('../partials/header') %>

        <main class="container">
            <section class="hero">
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="gradient-text">Projet CIS</span><br>
                        OAuth2 & OpenID Connect
                    </h1>
                    <p class="hero-description">
                        Infrastructure s√©curis√©e d'authentification et d'autorisation avec Keycloak
                    </p>

                    <% if (isAuthenticated) { %>
                        <div class="status-card success">
                            <div class="status-icon">‚úÖ</div>
                            <div class="status-content">
                                <h3>Bienvenue, <%= user.preferred_username %> !</h3>
                                <p>Vous √™tes actuellement connect√©</p>
                            </div>
                        </div>
                        <div class="hero-actions">
                            <a href="/profile" class="btn btn-primary btn-lg">
                                Voir mon profil
                            </a>
                            <a href="/devices" class="btn btn-secondary btn-lg">
                                G√©rer mes appareils
                            </a>
                            <a href="/logout" class="btn btn-logout btn-lg">
                                D√©connexion
                            </a>
                        </div>
                        <% } else { %>
                            <div class="status-card">
                                <div class="status-icon">üîí</div>
                                <div class="status-content">
                                    <h3>Non authentifi√©</h3>
                                    <p>Connectez-vous pour acc√©der √† votre espace personnel</p>
                                </div>
                            </div>
                            <div class="hero-actions">
                                <a href="/login" class="btn btn-primary btn-lg">
                                    Se connecter
                                </a>
                                <a href="/register" class="btn btn-secondary btn-lg">
                                    Cr√©er un compte
                                </a>
                            </div>
                            <% } %>
                </div>
            </section>

            <section class="features">
                <h2 class="section-title">Fonctionnalit√©s</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üîê</div>
                        <h3>Standard Flow</h3>
                        <p>Authentification via Authorization Code Flow avec PKCE pour une s√©curit√© maximale</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üì±</div>
                        <h3>Device Flow</h3>
                        <p>Association d'appareils embarqu√©s sans clavier via OAuth2 Device Authorization Grant</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üõ°Ô∏è</div>
                        <h3>S√©curit√©</h3>
                        <p>Tokens JWT, PKCE, protection CSRF, et gestion s√©curis√©e des sessions</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚öôÔ∏è</div>
                        <h3>Keycloak IAM</h3>
                        <p>Serveur d'identit√© et gestion des acc√®s centralis√© et professionnel</p>
                    </div>
                </div>
            </section>
        </main>

        <%- include('../partials/footer') %>

            <script src="/js/main.js"></script>
</body>

</html>